!function(r){var n={};function i(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=r,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=111)}([function(t,e,r){"use strict";var o=r(2),s=r(41),n=r(12),i=r(43),c=function(){function r(t){this._isScalar=!1,t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,r){var n=this.operator,i=s.toSubscriber(t,e,r);if(n?n.call(i,this.source):i.add(this.source||!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},r.prototype.forEach=function(n,t){var i=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;r=i.subscribe(function(t){if(r)try{n(t)}catch(t){e(t),r.unsubscribe()}else n(t)},e,t)})},r.prototype._subscribe=function(t){return this.source.subscribe(t)},r.prototype[n.observable]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return 0===t.length?this:i.pipeFromArray(t)(this)},r.prototype.toPromise=function(t){var n=this;if(t||(o.root.Rx&&o.root.Rx.config&&o.root.Rx.config.Promise?t=o.root.Rx.config.Promise:o.root.Promise&&(t=o.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},r.create=function(t){return new r(t)},r}();e.Observable=c},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=r(16),i=r(3),u=r(18),s=r(11),a=function(o){function i(t,e,r){switch(o.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=u.empty;break;case 1:if(!t){this.destination=u.empty;break}if("object"==typeof t){if((i=t)instanceof a||"syncErrorThrowable"in i&&i[s.rxSubscriber]){var n=t[s.rxSubscriber]();this.syncErrorThrowable=n.syncErrorThrowable,(this.destination=n).add(this)}else this.syncErrorThrowable=!0,this.destination=new h(this,t);break}default:this.syncErrorThrowable=!0,this.destination=new h(this,t,e,r)}var i}return n(i,o),i.prototype[s.rxSubscriber]=function(){return this},i.create=function(t,e,r){var n=new i(t,e,r);return n.syncErrorThrowable=!1,n},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},i}(i.Subscription),h=function(s){function t(t,e,r,n){var i;s.call(this),this._parentSubscriber=t;var o=this;c.isFunction(e)?i=e:e&&(i=e.next,r=e.error,n=e.complete,e!==u.empty&&(o=Object.create(e),c.isFunction(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=i,this._error=r,this._complete=n}return n(t,s),t.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber;if(this._error)e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else{if(!e.syncErrorThrowable)throw this.unsubscribe(),t;e.syncErrorValue=t,e.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};e.syncErrorThrowable?this.__tryOrSetError(e,r):this.__tryOrUnsub(r),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){throw this.unsubscribe(),t}},t.prototype.__tryOrSetError=function(e,t,r){try{t.call(this._context,r)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(e.Subscriber=a)},function(t,i,e){"use strict";(function(t){var e="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,n=e||void 0!==t&&t||r;i.root=n,function(){if(!n)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(this,e(40))},function(t,e,r){"use strict";var h=r(5),l=r(17),p=r(16),f=r(10),b=r(6),d=r(42),n=function(){function n(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return n.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,o=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,c=n?n.length:0;r;)r.remove(this),r=++s<c&&n[s]||null;if(p.isFunction(i))f.tryCatch(i).call(this)===b.errorObject&&(e=!0,t=t||(b.errorObject.e instanceof d.UnsubscriptionError?y(b.errorObject.e.errors):[b.errorObject.e]));if(h.isArray(o))for(s=-1,c=o.length;++s<c;){var u=o[s];if(l.isObject(u))if(f.tryCatch(u.unsubscribe).call(u)===b.errorObject){e=!0,t=t||[];var a=b.errorObject.e;a instanceof d.UnsubscriptionError?t=t.concat(y(a.errors)):t.push(a)}}if(e)throw new d.UnsubscriptionError(t)}},n.prototype.add=function(t){if(!t||t===n.EMPTY)return n.EMPTY;if(t===this)return this;var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if("function"!=typeof e._addParent){var r=e;(e=new n)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(e),e._addParent(this),e},n.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},n.prototype._addParent=function(t){var e=this._parent,r=this._parents;e&&e!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},n.EMPTY=((t=new n).closed=!0,t),n}();function y(t){return t.reduce(function(t,e){return t.concat(e instanceof d.UnsubscriptionError?e.errors:e)},[])}e.Subscription=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),o=r(1),s=r(3),c=r(19),u=r(45),a=r(11),h=function(e){function t(t){e.call(this,t),this.destination=t}return n(t,e),t}(o.Subscriber);e.SubjectSubscriber=h;var l=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return n(t,e),t.prototype[a.rxSubscriber]=function(){return new h(this)},t.prototype.lift=function(t){var e=new p(this,this);return e.operator=t,e},t.prototype.next=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},t.prototype.error=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),s.Subscription.EMPTY):this.isStopped?(t.complete(),s.Subscription.EMPTY):(this.observers.push(t),new u.SubjectSubscription(this,t))},t.prototype.asObservable=function(){var t=new i.Observable;return t.source=this,t},t.create=function(t,e){return new p(t,e)},t}(i.Observable),p=function(r){function t(t,e){r.call(this),this.destination=t,this.source=e}return n(t,r),t.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},t.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},t.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},t.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):s.Subscription.EMPTY},t}(e.Subject=l);e.AnonymousSubject=p},function(t,e,r){"use strict";e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";e.errorObject={e:{}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(r(1).Subscriber);e.OuterSubscriber=i},function(t,e,r){"use strict";var l=r(2),p=r(20),f=r(21),b=r(17),d=r(0),y=r(13),v=r(49),m=r(12);e.subscribeToResult=function(t,e,r,n){var i=new v.InnerSubscriber(t,r,n);if(i.closed)return null;if(e instanceof d.Observable)return e._isScalar?(i.next(e.value),i.complete(),null):(i.syncErrorThrowable=!0,e.subscribe(i));if(p.isArrayLike(e)){for(var o=0,s=e.length;o<s&&!i.closed;o++)i.next(e[o]);i.closed||i.complete()}else{if(f.isPromise(e))return e.then(function(t){i.closed||(i.next(t),i.complete())},function(t){return i.error(t)}).then(null,function(t){l.root.setTimeout(function(){throw t})}),i;if(e&&"function"==typeof e[y.iterator])for(var c=e[y.iterator]();;){var u=c.next();if(u.done){i.complete();break}if(i.next(u.value),i.closed)break}else if(e&&"function"==typeof e[m.observable]){var a=e[m.observable]();if("function"==typeof a.subscribe)return a.subscribe(new v.InnerSubscriber(t,r,n));i.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var h="You provided "+(b.isObject(e)?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";i.error(new TypeError(h))}}return null}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function r(t){e.call(this),this.scheduler=t}return n(r,e),r.create=function(t){return new r(t)},r.dispatch=function(t){t.subscriber.complete()},r.prototype._subscribe=function(t){var e=this.scheduler;if(e)return e.schedule(r.dispatch,0,{subscriber:t});t.complete()},r}(r(0).Observable);e.EmptyObservable=i},function(t,e,r){"use strict";var n,i=r(6);function o(){try{return n.apply(this,arguments)}catch(t){return i.errorObject.e=t,i.errorObject}}e.tryCatch=function(t){return n=t,o}},function(t,e,r){"use strict";var n=r(2).root.Symbol;e.rxSubscriber="function"==typeof n&&"function"==typeof n.for?n.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){"use strict";var n=r(2);function i(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}e.getSymbolObservable=i,e.observable=i(n.root),e.$$observable=e.observable},function(t,e,r){"use strict";var n=r(2);function i(t){var e=t.Symbol;if("function"==typeof e)return e.iterator||(e.iterator=e("iterator polyfill")),e.iterator;var r=t.Set;if(r&&"function"==typeof(new r)["@@iterator"])return"@@iterator";var n=t.Map;if(n)for(var i=Object.getOwnPropertyNames(n.prototype),o=0;o<i.length;++o){var s=i[o];if("entries"!==s&&"size"!==s&&n.prototype[s]===n.prototype.entries)return s}return"@@iterator"}e.symbolIteratorPonyfill=i,e.iterator=i(n.root),e.$$iterator=e.iterator},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(22),c=r(9),u=r(53),o=function(r){function o(t,e){r.call(this),this.array=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(o,r),o.create=function(t,e){return new o(t,e)},o.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=t[t.length-1];u.isScheduler(r)?t.pop():r=null;var n=t.length;return 1<n?new o(t,r):1===n?new s.ScalarObservable(t[0],r):new c.EmptyObservable(r)},o.dispatch=function(t){var e=t.array,r=t.index,n=t.count,i=t.subscriber;n<=r?i.complete():(i.next(e[r]),i.closed||(t.index=r+1,this.schedule(t)))},o.prototype._subscribe=function(t){var e=this.array,r=e.length,n=this.scheduler;if(n)return n.schedule(o.dispatch,0,{array:e,index:0,count:r,subscriber:t});for(var i=0;i<r&&!t.closed;i++)t.next(e[i]);t.complete()},o}(i.Observable);e.ArrayObservable=o},function(t,e,r){"use strict";var n=r(59),i=r(61);e.async=new i.AsyncScheduler(n.AsyncAction)},function(t,e,r){"use strict";e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";e.isObject=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){"use strict";e.empty={closed:!0,next:function(t){},error:function(t){throw t},complete:function(){}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.ObjectUnsubscribedError=i},function(t,e,r){"use strict";e.isArrayLike=function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(r){function n(t,e){r.call(this),this.value=t,this.scheduler=e,this._isScalar=!0,e&&(this._isScalar=!1)}return i(n,r),n.create=function(t,e){return new n(t,e)},n.dispatch=function(t){var e=t.done,r=t.value,n=t.subscriber;e?n.complete():(n.next(r),n.closed||(t.done=!0,this.schedule(t)))},n.prototype._subscribe=function(t){var e=this.value,r=this.scheduler;if(r)return r.schedule(n.dispatch,0,{done:!1,value:e,subscriber:t});t.next(e),t.closed||t.complete()},n}(r(0).Observable);e.ScalarObservable=n},function(t,e,r){"use strict";var n=r(0),i=function(){function e(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return e.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},e.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},e.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return n.Observable.of(this.value);case"E":return n.Observable.throw(this.error);case"C":return n.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();e.Notification=i},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.map=function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}();e.MapOperator=o;var s=function(n){function t(t,e,r){n.call(this,t),this.project=e,this.count=0,this.thisArg=r||this}return i(t,n),t.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(8),i=r(7);e.mergeMap=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return"number"==typeof r&&(n=r,r=null),t.lift(new s(e,r,n))}};var s=function(){function t(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.project=t,this.resultSelector=e,this.concurrent=r}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.resultSelector,this.concurrent))},t}();e.MergeMapOperator=s;var c=function(i){function t(t,e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY),i.call(this,t),this.project=e,this.resultSelector=r,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}return n(t,i),t.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},t.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},t.prototype._innerSub=function(t,e,r){this.add(o.subscribeToResult(this,t,e,r))},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){this.resultSelector?this._notifyResultSelector(t,e,r,n):this.destination.next(e)},t.prototype._notifyResultSelector=function(t,e,r,n){var i;try{i=this.resultSelector(t,e,r,n)}catch(t){return void this.destination.error(t)}this.destination.next(i)},t.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.OuterSubscriber);e.MergeMapSubscriber=c},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1);e.refCount=function(){return function(t){return t.lift(new o(t))}};var o=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new s(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),s=function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(i.Subscriber)},function(t,e,r){"use strict";var o=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0});var s,n,c=r(39),u=r(0);r(46),r(50),r(54),r(57),r(65),r(68),r(71),r(73),r(75),r(78),r(83),r(87),r(90),r(92),r(99),r(103),r(105),(n=s=e.ConnectionStatus||(e.ConnectionStatus={}))[n.Uninitialized=0]="Uninitialized",n[n.Connecting=1]="Connecting",n[n.Online=2]="Online",n[n.ExpiredToken=3]="ExpiredToken",n[n.FailedToConnect=4]="FailedToConnect",n[n.Ended=5]="Ended";var a=2e4,i=new Error("expired token"),h=new Error("conversation ended"),l=new Error("failed to connect"),p=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];"undefined"!=typeof window&&window.botchatDebug&&t&&console.log.apply(console,[t].concat(e))},f=function(){function t(t){this.connectionStatus$=new c.BehaviorSubject(s.Uninitialized),this.domain="https://directline.botframework.com/v3/directline",this.watermark="",this.pollingInterval=1e3,this.secret=t.secret,this.token=t.secret||t.token,this.webSocket=(void 0===t.webSocket||t.webSocket)&&"undefined"!=typeof WebSocket&&void 0!==WebSocket,t.domain&&(this.domain=t.domain),t.conversationId&&(this.conversationId=t.conversationId),t.watermark&&(this.watermark=t.watermark),t.streamUrl&&(t.token&&t.conversationId?this.streamUrl=t.streamUrl:console.warn("streamUrl was ignored: you need to provide a token and a conversationid")),void 0!==t.pollingInterval&&(this.pollingInterval=t.pollingInterval),this.activity$=(this.webSocket?this.webSocketActivity$():this.pollingGetActivity$()).share()}return t.prototype.checkConnection=function(t){var r=this;void 0===t&&(t=!1);var e=this.connectionStatus$.flatMap(function(e){return e===s.Uninitialized?(r.connectionStatus$.next(s.Connecting),r.token&&r.streamUrl?(r.connectionStatus$.next(s.Online),u.Observable.of(e)):r.startConversation().do(function(t){r.conversationId=t.conversationId,r.token=r.secret||t.token,r.streamUrl=t.streamUrl,r.referenceGrammarId=t.referenceGrammarId,r.secret||r.refreshTokenLoop(),r.connectionStatus$.next(s.Online)},function(t){r.connectionStatus$.next(s.FailedToConnect)}).map(function(t){return e})):u.Observable.of(e)}).filter(function(t){return t!=s.Uninitialized&&t!=s.Connecting}).flatMap(function(t){switch(t){case s.Ended:return u.Observable.throw(h);case s.FailedToConnect:return u.Observable.throw(l);case s.ExpiredToken:default:return u.Observable.of(t)}});return t?e.take(1):e},t.prototype.expiredToken=function(){var t=this.connectionStatus$.getValue();t!=s.Ended&&t!=s.FailedToConnect&&this.connectionStatus$.next(s.ExpiredToken)},t.prototype.startConversation=function(){var t=this.conversationId?this.domain+"/conversations/"+this.conversationId+"?watermark="+this.watermark:this.domain+"/conversations",e=this.conversationId?"GET":"POST";return u.Observable.ajax({method:e,url:t,timeout:a,headers:{Accept:"application/json",Authorization:"Bearer "+this.token}}).map(function(t){return t.response}).retryWhen(function(t){return t.mergeMap(function(t){return 400<=t.status&&t.status<600?u.Observable.throw(t):u.Observable.of(t)}).delay(a).take(45)})},t.prototype.refreshTokenLoop=function(){var e=this;this.tokenRefreshSubscription=u.Observable.interval(9e5).flatMap(function(t){return e.refreshToken()}).subscribe(function(t){p("refreshing token",t,"at",new Date),e.token=t})},t.prototype.refreshToken=function(){var e=this;return this.checkConnection(!0).flatMap(function(t){return u.Observable.ajax({method:"POST",url:e.domain+"/tokens/refresh",timeout:a,headers:{Authorization:"Bearer "+e.token}}).map(function(t){return t.response.token}).retryWhen(function(t){return t.mergeMap(function(t){return 403===t.status?(e.expiredToken(),u.Observable.throw(t)):404===t.status?u.Observable.throw(t):u.Observable.of(t)}).delay(a).take(45)})})},t.prototype.reconnect=function(t){this.token=t.token,this.streamUrl=t.streamUrl,this.connectionStatus$.getValue()===s.ExpiredToken&&this.connectionStatus$.next(s.Online)},t.prototype.end=function(){this.tokenRefreshSubscription&&this.tokenRefreshSubscription.unsubscribe(),this.connectionStatus$.next(s.Ended)},t.prototype.getSessionId=function(){var e=this;return p("getSessionId"),this.checkConnection(!0).flatMap(function(t){return u.Observable.ajax({method:"GET",url:e.domain+"/session/getsessionid",withCredentials:!0,timeout:a,headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token}}).map(function(t){return t&&t.response&&t.response.sessionId?(p("getSessionId response: "+t.response.sessionId),t.response.sessionId):""}).catch(function(t){return p("getSessionId error: "+t.status),u.Observable.of("")})}).catch(function(t){return e.catchExpiredToken(t)})},t.prototype.postActivity=function(e){var r=this;return"message"===e.type&&e.attachments&&0<e.attachments.length?this.postMessageWithAttachments(e):(p("postActivity",e),this.checkConnection(!0).flatMap(function(t){return u.Observable.ajax({method:"POST",url:r.domain+"/conversations/"+r.conversationId+"/activities",body:e,timeout:a,headers:{"Content-Type":"application/json",Authorization:"Bearer "+r.token}}).map(function(t){return t.response.id}).catch(function(t){return r.catchPostError(t)})}).catch(function(t){return r.catchExpiredToken(t)}))},t.prototype.postMessageWithAttachments=function(t){var r,e=this,n=t.attachments,i=o(t,["attachments"]);return this.checkConnection(!0).flatMap(function(t){return(r=new FormData).append("activity",new Blob([JSON.stringify(i)],{type:"application/vnd.microsoft.activity"})),u.Observable.from(n||[]).flatMap(function(e){return u.Observable.ajax({method:"GET",url:e.contentUrl,responseType:"arraybuffer"}).do(function(t){return r.append("file",new Blob([t.response],{type:e.contentType}),e.name)})}).count()}).flatMap(function(t){return u.Observable.ajax({method:"POST",url:e.domain+"/conversations/"+e.conversationId+"/upload?userId="+i.from.id,body:r,timeout:a,headers:{Authorization:"Bearer "+e.token}}).map(function(t){return t.response.id}).catch(function(t){return e.catchPostError(t)})}).catch(function(t){return e.catchPostError(t)})},t.prototype.catchPostError=function(t){if(403===t.status)this.expiredToken();else if(400<=t.status&&t.status<500)return u.Observable.throw(t);return u.Observable.of("retry")},t.prototype.catchExpiredToken=function(t){return t===i?u.Observable.of("retry"):u.Observable.throw(t)},t.prototype.pollingGetActivity$=function(){var i=this,e=u.Observable.create(function(r){var n=new c.BehaviorSubject({});n.subscribe(function(){if(i.connectionStatus$.getValue()===s.Online){var e=Date.now();u.Observable.ajax({headers:{Accept:"application/json",Authorization:"Bearer "+i.token},method:"GET",url:i.domain+"/conversations/"+i.conversationId+"/activities?watermark="+i.watermark,timeout:a}).subscribe(function(t){r.next(t),setTimeout(function(){return n.next(null)},Math.max(0,i.pollingInterval-Date.now()+e))},function(t){switch(t.status){case 403:i.connectionStatus$.next(s.ExpiredToken),setTimeout(function(){return n.next(null)},i.pollingInterval);break;case 404:i.connectionStatus$.next(s.Ended);break;default:r.error(t)}})}})});return this.checkConnection().flatMap(function(t){return e.catch(function(){return u.Observable.empty()}).map(function(t){return t.response}).flatMap(function(t){return i.observableFromActivityGroup(t)})})},t.prototype.observableFromActivityGroup=function(t){return t.watermark&&(this.watermark=t.watermark),u.Observable.from(t.activities)},t.prototype.webSocketActivity$=function(){var e=this;return this.checkConnection().flatMap(function(t){return e.observableWebSocket().retryWhen(function(t){return t.delay(3e3).mergeMap(function(t){return e.reconnectToConversation()})})}).flatMap(function(t){return e.observableFromActivityGroup(t)})},t.prototype.observableWebSocket=function(){var t=this;return u.Observable.create(function(e){p("creating WebSocket",t.streamUrl);var r,n=new WebSocket(t.streamUrl);return n.onopen=function(t){p("WebSocket open",t),r=u.Observable.interval(a).subscribe(function(t){return n.send("")})},n.onclose=function(t){p("WebSocket close",t),r&&r.unsubscribe(),e.error(t)},n.onmessage=function(t){return t.data&&e.next(JSON.parse(t.data))},function(){0!==n.readyState&&1!==n.readyState||n.close()}})},t.prototype.reconnectToConversation=function(){var e=this;return this.checkConnection(!0).flatMap(function(t){return u.Observable.ajax({method:"GET",url:e.domain+"/conversations/"+e.conversationId+"?watermark="+e.watermark,timeout:a,headers:{Accept:"application/json",Authorization:"Bearer "+e.token}}).do(function(t){e.secret||(e.token=t.response.token),e.streamUrl=t.response.streamUrl}).map(function(t){return null}).retryWhen(function(t){return t.mergeMap(function(t){if(403===t.status)e.expiredToken();else if(404===t.status)return u.Observable.throw(h);return u.Observable.of(t)}).delay(a).take(45)})})},t}();e.DirectLine=f},function(t,e,r){var n=r(29);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(34)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){var n=r(30);(t.exports=r(31)(!1)).push([t.i,"@font-face\n{\t\n    font-family: 'Onesize';\n    src: url("+n(r(32))+") format('truetype');\n}\n\n@font-face\n{\t\n    font-family: 'OnesizeReverse';\n    src: url("+n(r(33))+") format('truetype');\n}",""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports=function(r){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(s=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[r].concat(o).concat([i]).join("\n")}var s;return[r].join("\n")}(t,r);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(r[i]=!0)}for(n=0;n<t.length;n++){var o=t[n];"number"==typeof o[0]&&r[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),s.push(o))}},s}},function(t,e,r){t.exports=r.p+"fonts/onesize.ttf"},function(t,e,r){t.exports=r.p+"fonts/onesize-reverse.ttf"},function(t,e,n){var r,i,o,u={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=(o={},function(t,e){if("function"==typeof t)return t();if(void 0===o[t]){var r=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}o[t]=r}return o[t]}),h=null,l=0,c=[],p=n(35);function f(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=u[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(w(n.parts[o],e))}else{var s=[];for(o=0;o<n.parts.length;o++)s.push(w(n.parts[o],e));u[n.id]={id:n.id,refs:1,parts:s}}}}function b(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i],s=e.base?o[0]+e.base:o[0],c={css:o[1],media:o[2],sourceMap:o[3]};n[s]?n[s].parts.push(c):r.push(n[s]={id:s,parts:[c]})}return r}function d(t,e){var r=s(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=c[c.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),c.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertAt.before,r);r.insertBefore(e,i)}}function y(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);0<=e&&c.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var r=function(){0;return n.nc}();r&&(t.attrs.nonce=r)}return m(e,t.attrs),d(t,e),e}function m(e,r){Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])})}function w(e,t){var r,n,i,o,s,c;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var u=l++;r=h||(h=v(t)),n=S.bind(null,r,u,!1),i=S.bind(null,r,u,!0)}else i=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(s=t,c=document.createElement("link"),void 0===s.attrs.type&&(s.attrs.type="text/css"),s.attrs.rel="stylesheet",m(c,s.attrs),d(s,c),n=function(t,e,r){var n=r.css,i=r.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(n=p(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([n],{type:"text/css"}),c=t.href;t.href=URL.createObjectURL(s),c&&URL.revokeObjectURL(c)}.bind(null,r=c,t),function(){y(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=function(t,e){var r=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,r),function(){y(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=a()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var c=b(t,s);return f(c,s),function(t){for(var e=[],r=0;r<c.length;r++){var n=c[r];(i=u[n.id]).refs--,e.push(i)}t&&f(b(t,s),s);for(r=0;r<e.length;r++){var i;if(0===(i=e[r]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete u[i.id]}}}};var x,g=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function S(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=g(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(r=0===n.indexOf("//")?n:0===n.indexOf("/")?i+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,r){t.exports=r.p+"12bfb5e5410e62d32d86f2978eda955a.png"},function(t,e,r){t.exports=r.p+"213f7c6c6d417bb59c5ecc405c856320.png"},function(t){t.exports={frames:[{filename:"01_give.png",frame:{x:202,y:246,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"01_give_sel.png",frame:{x:161,y:205,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"02_pickup.png",frame:{x:0,y:205,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"02_pickup_sel.png",frame:{x:0,y:164,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"03_use.png",frame:{x:161,y:82,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"03_use_sel.png",frame:{x:161,y:123,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"04_open.png",frame:{x:161,y:0,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"04_open_sel.png",frame:{x:161,y:41,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"05_lookat.png",frame:{x:0,y:0,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"05_lookat_sel.png",frame:{x:0,y:41,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"06_push.png",frame:{x:101,y:246,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"06_push_sel.png",frame:{x:0,y:287,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"07_close.png",frame:{x:101,y:287,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"07_close_sel.png",frame:{x:0,y:246,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"08_talkto.png",frame:{x:0,y:82,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"08_talkto_sel.png",frame:{x:0,y:123,w:160,h:40},spriteSourceSize:{x:0,y:0,w:160,h:40},sourceSize:{w:160,h:40}},{filename:"09_pull.png",frame:{x:202,y:287,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}},{filename:"09_pull_sel.png",frame:{x:161,y:164,w:100,h:40},spriteSourceSize:{x:0,y:0,w:100,h:40},sourceSize:{w:100,h:40}}],meta:{image:"main.png",size:{w:303,h:328},scale:"1"}}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(4),o=r(19),s=function(r){function t(t){r.call(this),this._value=t}return n(t,r),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var e=r.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},t}(i.Subject);e.BehaviorSubject=s},function(So,To){var Uo;Uo=function(){return this}();try{Uo=Uo||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(Uo=window)}So.exports=Uo},function(t,e,r){"use strict";var n=r(1),i=r(11),o=r(18);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t){r.call(this),this.errors=t;var e=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"");this.name=e.name="UnsubscriptionError",this.stack=e.stack,this.message=e.message}return n(t,r),t}(Error);e.UnsubscriptionError=i},function(t,e,r){"use strict";var n=r(44);function i(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,r){"use strict";e.noop=function(){}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t,e){r.call(this),this.subject=t,this.subscriber=e,this.closed=!1}return n(t,r),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},t}(r(3).Subscription);e.SubjectSubscription=i},function(t,e,r){"use strict";var n=r(0),i=r(47);n.Observable.prototype.catch=i._catch,n.Observable.prototype._catch=i._catch},function(t,e,r){"use strict";var n=r(48);e._catch=function(t){return n.catchError(t)(this)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(7),o=r(8);e.catchError=function(n){return function(t){var e=new s(n),r=t.lift(e);return e.caught=r}};var s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.selector,this.caught))},t}(),c=function(n){function t(t,e,r){n.call(this,t),this.selector=e,this.caught=r}return i(t,n),t.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void n.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),this.add(o.subscribeToResult(this,e))}},t}(n.OuterSubscriber)},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(n){function t(t,e,r){n.call(this),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}return i(t,n),t.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},t.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r(1).Subscriber);e.InnerSubscriber=n},function(t,e,r){"use strict";var n=r(0),i=r(51);n.Observable.prototype.combineLatest=i.combineLatest},function(t,e,r){"use strict";var n=r(52);e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return n.combineLatest.apply(void 0,t)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(14),o=r(5),s=r(7),c=r(8),u={};e.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&o.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(new i.ArrayObservable([t].concat(e)),new a(r))}};var a=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.project))},t}();e.CombineLatestOperator=a;var h=function(r){function t(t,e){r.call(this,t),this.project=e,this.active=0,this.values=[],this.observables=[]}return n(t,r),t.prototype._next=function(t){this.values.push(u),this.observables.push(t)},t.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(c.subscribeToResult(this,n,n,r))}}},t.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.values,s=o[r],c=this.toRespond?s===u?--this.toRespond:this.toRespond:0;o[r]=e,0===c&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},t.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t}(s.OuterSubscriber);e.CombineLatestSubscriber=h},function(t,e,r){"use strict";e.isScheduler=function(t){return t&&"function"==typeof t.schedule}},function(t,e,r){"use strict";var n=r(0),i=r(55);n.Observable.prototype.count=i.count},function(t,e,r){"use strict";var n=r(56);e.count=function(t){return n.count(t)(this)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.count=function(e){return function(t){return t.lift(new o(e,t))}};var o=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source))},t}(),s=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.source=r,this.count=0,this.index=0}return i(t,n),t.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},t.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},t.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},t}(n.Subscriber)},function(t,e,r){"use strict";var n=r(0),i=r(58);n.Observable.prototype.delay=i.delay},function(t,e,r){"use strict";var n=r(15),i=r(63);e.delay=function(t,e){return void 0===e&&(e=n.async),i.delay(t,e)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(2),o=function(r){function t(t,e){r.call(this,t,e),this.scheduler=t,this.pending=!1,this.work=e}return n(t,r),t.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t,this.pending=!0;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},t.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),i.root.setInterval(t.flush.bind(t,this),r)},t.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;i.root.clearInterval(e)},t.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},t}(r(60).Action);e.AsyncAction=o},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(r){function t(t,e){r.call(this)}return n(t,r),t.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},t}(r(3).Subscription);e.Action=i},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(r(62).Scheduler);e.AsyncScheduler=i},function(t,e,r){"use strict";var n=function(){function r(t,e){void 0===e&&(e=r.now),this.SchedulerAction=t,this.now=e}return r.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},r.now=Date.now?Date.now:function(){return+new Date},r}();e.Scheduler=n},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(15),o=r(64),s=r(1),c=r(23);e.delay=function(t,e){void 0===e&&(e=n.async);var r=o.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new u(r,e))}};var u=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.delay,this.scheduler))},t}(),a=function(n){function e(t,e,r){n.call(this,t),this.delay=e,this.scheduler=r,this.queue=[],this.active=!1,this.errored=!1}return i(e,n),e.dispatch=function(t){for(var e=t.source,r=e.queue,n=t.scheduler,i=t.destination;0<r.length&&r[0].time-n.now()<=0;)r.shift().notification.observe(i);if(0<r.length){var o=Math.max(0,r[0].time-n.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,r=new h(e.now()+this.delay,t);this.queue.push(r),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(c.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete())},e}(s.Subscriber),h=function(t,e){this.time=t,this.notification=e}},function(t,e,r){"use strict";e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},function(t,e,r){"use strict";var n=r(0),i=r(66);n.Observable.prototype.do=i._do,n.Observable.prototype._do=i._do},function(t,e,r){"use strict";var n=r(67);e._do=function(t,e,r){return n.tap(t,e,r)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=r(1);e.tap=function(e,r,n){return function(t){return t.lift(new i(e,r,n))}};var i=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new o(t,this.nextOrObserver,this.error,this.complete))},t}(),o=function(o){function t(t,e,r,n){o.call(this,t);var i=new s.Subscriber(e,r,n);i.syncErrorThrowable=!0,this.add(i),this.safeSubscriber=i}return n(t,o),t.prototype._next=function(t){var e=this.safeSubscriber;e.next(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.next(t)},t.prototype._error=function(t){var e=this.safeSubscriber;e.error(t),e.syncErrorThrown?this.destination.error(e.syncErrorValue):this.destination.error(t)},t.prototype._complete=function(){var t=this.safeSubscriber;t.complete(),t.syncErrorThrown?this.destination.error(t.syncErrorValue):this.destination.complete()},t}(s.Subscriber)},function(t,e,r){"use strict";var n=r(0),i=r(69);n.Observable.prototype.filter=i.filter},function(t,e,r){"use strict";var n=r(70);e.filter=function(t,e){return n.filter(t,e)(this)}},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1);e.filter=function(e,r){return function(t){return t.lift(new o(e,r))}};var o=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(n){function t(t,e,r){n.call(this,t),this.predicate=e,this.thisArg=r,this.count=0}return i(t,n),t.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},t}(n.Subscriber)},function(t,e,r){"use strict";var n=r(0),i=r(72);n.Observable.prototype.map=i.map},function(t,e,r){"use strict";var n=r(24);e.map=function(t,e){return n.map(t,e)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(74);n.Observable.prototype.mergeMap=i.mergeMap,n.Observable.prototype.flatMap=i.mergeMap},function(t,e,r){"use strict";var n=r(25);e.mergeMap=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),n.mergeMap(t,e,r)(this)}},function(t,e,r){"use strict";var n=r(0),i=r(76);n.Observable.prototype.retryWhen=i.retryWhen},function(t,e,r){"use strict";var n=r(77);e.retryWhen=function(t){return n.retryWhen(t)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(4),s=r(10),c=r(6),i=r(7),u=r(8);e.retryWhen=function(e){return function(t){return t.lift(new a(e,t))}};var a=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.notifier,this.source))},t}(),h=function(i){function t(t,e,r){i.call(this,t),this.notifier=e,this.source=r}return n(t,i),t.prototype.error=function(t){if(!this.isStopped){var e=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(e=new o.Subject,(r=s.tryCatch(this.notifier)(e))===c.errorObject)return i.prototype.error.call(this,c.errorObject.e);n=u.subscribeToResult(this,r)}this._unsubscribeAndRecycle(),this.errors=e,this.retries=r,this.retriesSubscription=n,e.next(t)}},t.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},t.prototype.notifyNext=function(t,e,r,n,i){var o=this.errors,s=this.retries,c=this.retriesSubscription;this.errors=null,this.retries=null,this.retriesSubscription=null,this._unsubscribeAndRecycle(),this.errors=o,this.retries=s,this.retriesSubscription=c,this.source.subscribe(this)},t}(i.OuterSubscriber)},function(t,e,r){"use strict";var n=r(0),i=r(79);n.Observable.prototype.share=i.share},function(t,e,r){"use strict";var n=r(80);e.share=function(){return n.share()(this)}},function(t,e,r){"use strict";var n=r(81),i=r(26),o=r(4);function s(){return new o.Subject}e.share=function(){return function(t){return i.refCount()(n.multicast(s)(t))}}},function(t,e,r){"use strict";var o=r(82);e.multicast=function(n,i){return function(t){var e;if(e="function"==typeof n?n:function(){return n},"function"==typeof i)return t.lift(new s(e,i));var r=Object.create(t,o.connectableObservableDescriptor);return r.source=t,r.subjectFactory=e,r}};var s=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),i=r(n).subscribe(t);return i.add(e.subscribe(n)),i},t}();e.MulticastOperator=s},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(4),o=r(0),s=r(1),c=r(3),u=r(26),a=function(r){function t(t,e){r.call(this),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}return n(t,r),t.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},t.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new c.Subscription).add(this.source.subscribe(new l(this.getSubject(),this))),t.closed?(this._connection=null,t=c.Subscription.EMPTY):this._connection=t),t},t.prototype.refCount=function(){return u.refCount()(this)},t}(o.Observable),h=(e.ConnectableObservable=a).prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:h._subscribe},_isComplete:{value:h._isComplete,writable:!0},getSubject:{value:h.getSubject},connect:{value:h.connect},refCount:{value:h.refCount}};var l=function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._error=function(t){this._unsubscribe(),r.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},t}(i.SubjectSubscriber),p=(function(){function t(t){this.connectable=t}t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new p(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i}}(),function(r){function t(t,e){r.call(this,t),this.connectable=e}return n(t,r),t.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,1<e)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(s.Subscriber))},function(t,e,r){"use strict";var n=r(0),i=r(84);n.Observable.prototype.take=i.take},function(t,e,r){"use strict";var n=r(85);e.take=function(t){return n.take(t)(this)}},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(1),o=r(86),s=r(9);e.take=function(e){return function(t){return 0===e?new s.EmptyObservable:t.lift(new c(e))}};var c=function(){function t(t){if(this.total=t,this.total<0)throw new o.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(r){function t(t,e){r.call(this,t),this.total=e,this.count=0}return n(t,r),t.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},t}(i.Subscriber)},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(e){function t(){var t=e.call(this,"argument out of range");this.name=t.name="ArgumentOutOfRangeError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);e.ArgumentOutOfRangeError=i},function(t,e,r){"use strict";var n=r(0),i=r(88);n.Observable.ajax=i.ajax},function(t,e,r){"use strict";var n=r(89);e.ajax=n.AjaxObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},c=r(2),l=r(10),p=r(6),n=r(0),o=r(1),s=r(24);function u(t,e){return void 0===e&&(e=null),new v({method:"GET",url:t,headers:e})}function a(t,e,r){return new v({method:"POST",url:t,body:e,headers:r})}function h(t,e){return new v({method:"DELETE",url:t,headers:e})}function f(t,e,r){return new v({method:"PUT",url:t,body:e,headers:r})}function b(t,e,r){return new v({method:"PATCH",url:t,body:e,headers:r})}e.ajaxGet=u,e.ajaxPost=a,e.ajaxDelete=h,e.ajaxPut=f,e.ajaxPatch=b;var d=s.map(function(t,e){return t.response});function y(t,e){return d(new v({method:"GET",url:t,responseType:"json",headers:e}))}e.ajaxGetJSON=y;var v=function(n){function e(t){n.call(this);var e={async:!0,createXHR:function(){return this.crossDomain?function(){if(c.root.XMLHttpRequest)return new c.root.XMLHttpRequest;if(c.root.XDomainRequest)return new c.root.XDomainRequest;throw new Error("CORS is not supported by your browser")}.call(this):function(){if(c.root.XMLHttpRequest)return new c.root.XMLHttpRequest;var t=void 0;try{for(var e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(t=e[r],new c.root.ActiveXObject(t))break}catch(t){}return new c.root.ActiveXObject(t)}catch(t){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)e.url=t;else for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);this.request=e}var t;return i(e,n),e.prototype._subscribe=function(t){return new m(t,this.request)},e.create=((t=function(t){return new e(t)}).get=u,t.post=a,t.delete=h,t.put=f,t.patch=b,t.getJSON=y,t),e}(n.Observable);e.AjaxObservable=v;var m=function(n){function t(t,e){n.call(this,t),this.request=e,this.done=!1;var r=e.headers=e.headers||{};e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),"Content-Type"in r||c.root.FormData&&e.body instanceof c.root.FormData||void 0===e.body||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),e.body=this.serializeBody(e.body,e.headers["Content-Type"]),this.send()}return i(t,n),t.prototype.next=function(t){this.done=!0;var e=this.xhr,r=this.request,n=this.destination,i=new w(t,e,r);n.next(i)},t.prototype.send=function(){var t=this.request,e=this.request,r=e.user,n=e.method,i=e.url,o=e.async,s=e.password,c=e.headers,u=e.body,a=t.createXHR,h=l.tryCatch(a).call(t);if(h===p.errorObject)this.error(p.errorObject.e);else{this.xhr=h,this.setupEvents(h,t);if((r?l.tryCatch(h.open).call(h,n,i,o,r,s):l.tryCatch(h.open).call(h,n,i,o))===p.errorObject)return this.error(p.errorObject.e),null;if(o&&(h.timeout=t.timeout,h.responseType=t.responseType),"withCredentials"in h&&(h.withCredentials=!!t.withCredentials),this.setHeaders(h,c),(u?l.tryCatch(h.send).call(h,u):l.tryCatch(h.send).call(h))===p.errorObject)return this.error(p.errorObject.e),null}return h},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(c.root.FormData&&e instanceof c.root.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setRequestHeader(r,e[r])},t.prototype.setupEvents=function(t,e){var r=e.progressSubscriber;function i(t){var e=i.subscriber,r=i.progressSubscriber,n=i.request;r&&r.error(t),e.error(new S(this,n))}if((t.ontimeout=i).request=e,i.subscriber=this,i.progressSubscriber=r,t.upload&&"withCredentials"in t){var n,o;if(r)n=function(t){n.progressSubscriber.next(t)},c.root.XDomainRequest?t.onprogress=n:t.upload.onprogress=n,n.progressSubscriber=r;o=function(t){var e=o,r=e.progressSubscriber,n=e.subscriber,i=e.request;r&&r.error(t),n.error(new x("ajax error",this,i))},(t.onerror=o).request=e,o.subscriber=this,o.progressSubscriber=r}function s(t){var e=s.subscriber,r=s.progressSubscriber,n=s.request;if(4===this.readyState){var i=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;0===i&&(i=o?200:0),200<=i&&i<300?(r&&r.complete(),e.next(t),e.complete()):(r&&r.error(t),e.error(new x("ajax error "+i,this,n)))}}(t.onreadystatechange=s).subscriber=this,s.progressSubscriber=r,s.request=e},t.prototype.unsubscribe=function(){var t=this.done,e=this.xhr;!t&&e&&4!==e.readyState&&"function"==typeof e.abort&&e.abort(),n.prototype.unsubscribe.call(this)},t}(o.Subscriber);e.AjaxSubscriber=m;var w=function(t,e,r){this.originalEvent=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=g(this.responseType,e)};e.AjaxResponse=w;var x=function(n){function t(t,e,r){n.call(this,t),this.message=t,this.xhr=e,this.request=r,this.status=e.status,this.responseType=e.responseType||r.responseType,this.response=g(this.responseType,e)}return i(t,n),t}(Error);function g(t,e){switch(t){case"json":return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null");case"xml":return e.responseXML;case"text":default:return"response"in e?e.response:e.responseText}}var S=function(r){function t(t,e){r.call(this,"ajax timeout",t,e)}return i(t,r),t}(e.AjaxError=x);e.AjaxTimeoutError=S},function(t,e,r){"use strict";var n=r(0),i=r(91);n.Observable.empty=i.empty},function(t,e,r){"use strict";var n=r(9);e.empty=n.EmptyObservable.create},function(t,e,r){"use strict";var n=r(0),i=r(93);n.Observable.from=i.from},function(t,e,r){"use strict";var n=r(94);e.from=n.FromObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(5),s=r(20),c=r(21),u=r(95),a=r(96),h=r(14),l=r(97),p=r(13),f=r(0),b=r(98),d=r(12),n=function(r){function n(t,e){r.call(this,null),this.ish=t,this.scheduler=e}return i(n,r),n.create=function(t,e){if(null!=t){if("function"==typeof t[d.observable])return t instanceof f.Observable&&!e?t:new n(t,e);if(o.isArray(t))return new h.ArrayObservable(t,e);if(c.isPromise(t))return new u.PromiseObservable(t,e);if("function"==typeof t[p.iterator]||"string"==typeof t)return new a.IteratorObservable(t,e);if(s.isArrayLike(t))return new l.ArrayLikeObservable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")},n.prototype._subscribe=function(t){var e=this.ish,r=this.scheduler;return null==r?e[d.observable]().subscribe(t):e[d.observable]().subscribe(new b.ObserveOnSubscriber(t,r,0))},n}(f.Observable);e.FromObservable=n},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(2),n=function(r){function n(t,e){r.call(this),this.promise=t,this.scheduler=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.prototype._subscribe=function(e){var r=this,t=this.promise,n=this.scheduler;if(null==n)this._isScalar?e.closed||(e.next(this.value),e.complete()):t.then(function(t){r.value=t,r._isScalar=!0,e.closed||(e.next(t),e.complete())},function(t){e.closed||e.error(t)}).then(null,function(t){o.root.setTimeout(function(){throw t})});else if(this._isScalar){if(!e.closed)return n.schedule(s,0,{value:this.value,subscriber:e})}else t.then(function(t){r.value=t,r._isScalar=!0,e.closed||e.add(n.schedule(s,0,{value:t,subscriber:e}))},function(t){e.closed||e.add(n.schedule(c,0,{err:t,subscriber:e}))}).then(null,function(t){o.root.setTimeout(function(){throw t})})},n}(r(0).Observable);function s(t){var e=t.value,r=t.subscriber;r.closed||(r.next(e),r.complete())}function c(t){var e=t.err,r=t.subscriber;r.closed||r.error(e)}e.PromiseObservable=n},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(2),i=r(0),s=r(13),c=function(r){function i(t,e){if(r.call(this),this.scheduler=e,null==t)throw new Error("iterator cannot be null.");this.iterator=function(t){var e=t[s.iterator];if(!e&&"string"==typeof t)return new u(t);if(!e&&void 0!==t.length)return new a(t);if(e)return t[s.iterator]();throw new TypeError("object is not iterable")}(t)}return n(i,r),i.create=function(t,e){return new i(t,e)},i.dispatch=function(t){var e=t.index,r=t.hasError,n=t.iterator,i=t.subscriber;if(r)i.error(t.error);else{var o=n.next();o.done?i.complete():(i.next(o.value),t.index=e+1,i.closed?"function"==typeof n.return&&n.return():this.schedule(t))}},i.prototype._subscribe=function(t){var e=this.iterator,r=this.scheduler;if(r)return r.schedule(i.dispatch,0,{index:0,iterator:e,subscriber:t});for(;;){var n=e.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed){"function"==typeof e.return&&e.return();break}}},i}(i.Observable);e.IteratorObservable=c;var u=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length),this.str=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}},t}(),a=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=function(t){var e=+t.length;if(isNaN(e))return 0;if(0===e||(r=e,"number"!=typeof r||!o.root.isFinite(r)))return e;var r;if(n=e,i=+n,(e=(0===i?i:isNaN(i)?i:i<0?-1:1)*Math.floor(Math.abs(e)))<=0)return 0;var n,i;if(h<e)return h;return e}(t)),this.arr=t,this.idx=e,this.len=r}return t.prototype[s.iterator]=function(){return this},t.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}},t}();var h=Math.pow(2,53)-1},function(t,e,r){"use strict";var n=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=r(0),s=r(22),c=r(9),o=function(r){function o(t,e){r.call(this),this.arrayLike=t,(this.scheduler=e)||1!==t.length||(this._isScalar=!0,this.value=t[0])}return n(o,r),o.create=function(t,e){var r=t.length;return 0===r?new c.EmptyObservable:1===r?new s.ScalarObservable(t[0],e):new o(t,e)},o.dispatch=function(t){var e=t.arrayLike,r=t.index,n=t.length,i=t.subscriber;i.closed||(n<=r?i.complete():(i.next(e[r]),t.index=r+1,this.schedule(t)))},o.prototype._subscribe=function(t){var e=this.arrayLike,r=this.scheduler,n=e.length;if(r)return r.schedule(o.dispatch,0,{arrayLike:e,index:0,length:n,subscriber:t});for(var i=0;i<n&&!t.closed;i++)t.next(e[i]);t.complete()},o}(i.Observable);e.ArrayLikeObservable=o},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=r(1),o=r(23);e.observeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new s(e,r))}};var s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=s;var c=function(n){function e(t,e,r){void 0===r&&(r=0),n.call(this,t),this.scheduler=e,this.delay=r}return i(e,n),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new u(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(o.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(o.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete())},e}(n.Subscriber);e.ObserveOnSubscriber=c;var u=function(t,e){this.notification=t,this.destination=e};e.ObserveOnMessage=u},function(t,e,r){"use strict";var n=r(0),i=r(100);n.Observable.interval=i.interval},function(t,e,r){"use strict";var n=r(101);e.interval=n.IntervalObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=r(102),n=r(0),s=r(15),c=function(r){function n(t,e){void 0===t&&(t=0),void 0===e&&(e=s.async),r.call(this),this.period=t,this.scheduler=e,(!o.isNumeric(t)||t<0)&&(this.period=0),e&&"function"==typeof e.schedule||(this.scheduler=s.async)}return i(n,r),n.create=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=s.async),new n(t,e)},n.dispatch=function(t){var e=t.index,r=t.subscriber,n=t.period;r.next(e),r.closed||(t.index+=1,this.schedule(t,n))},n.prototype._subscribe=function(t){var e=this.period,r=this.scheduler;t.add(r.schedule(n.dispatch,e,{index:0,subscriber:t,period:e}))},n}(n.Observable);e.IntervalObservable=c},function(t,e,r){"use strict";var n=r(5);e.isNumeric=function(t){return!n.isArray(t)&&0<=t-parseFloat(t)+1}},function(t,e,r){"use strict";var n=r(0),i=r(104);n.Observable.of=i.of},function(t,e,r){"use strict";var n=r(14);e.of=n.ArrayObservable.of},function(t,e,r){"use strict";var n=r(0),i=r(106);n.Observable.throw=i._throw},function(t,e,r){"use strict";var n=r(107);e._throw=n.ErrorObservable.create},function(t,e,r){"use strict";var i=this&&this.__extends||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);function n(){this.constructor=t}t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=function(r){function n(t,e){r.call(this),this.error=t,this.scheduler=e}return i(n,r),n.create=function(t,e){return new n(t,e)},n.dispatch=function(t){var e=t.error;t.subscriber.error(e)},n.prototype._subscribe=function(t){var e=this.error,r=this.scheduler;if(t.syncErrorThrowable=!0,r)return r.schedule(n.dispatch,0,{error:e,subscriber:t});t.error(e)},n}(r(0).Observable);e.ErrorObservable=n},function(t,e,r){"use strict";var n=r(0),i=r(109);n.Observable.prototype.concatMap=i.concatMap},function(t,e,r){"use strict";var n=r(110);e.concatMap=function(t,e){return n.concatMap(t,e)(this)}},function(t,e,r){"use strict";var n=r(25);e.concatMap=function(t,e){return n.mergeMap(t,e,1)}},function(t,e,r){"use strict";r.r(e);r(28);var n,i,s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},o=function(){function t(){}return t.preload=function(t){var e,r;try{for(var n=s(gameInfo.assets),i=n.next();!i.done;i=n.next()){var o=i.value;o.frameWidth&&o.frameHeight?t.load.spritesheet(o.key,o.url,o.frameWidth,o.frameHeight):t.load.image(o.key,o.url)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),c=r(27),u=(r(108),function(o,s,c,u){return new(c||(c=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(r,n)}i((u=u.apply(o,s||[])).next())})}),a=function(r,n){var i,o,s,t,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,o=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(r,c)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},h=function(){function t(){this.directLine=new c.DirectLine({secret:options.directLineSecret})}return t.prototype.connect=function(n,i){var t=this;console.log("Connecting to 🤖 ..."),this.directLine.activity$.filter(function(t){return("message"===t.type||"event"===t.type)&&t.from.id===options.botId}).concatMap(function(r){return u(t,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=r,this.conversationId||(this.conversationId=e.conversation.id,console.log("Connected to 🤖")),console.log("🤖 "+this.activityToString(e)),"message"!=e.type?[3,4]:"Which game do you want to play?"!=e.text?[3,1]:(this.sendMessageToBot(gameInfo.gameName),[3,3]);case 1:return[4,n(e)];case 2:t.sent(),t.label=3;case 3:return[3,6];case 4:return"event"!=e.type?[3,6]:[4,i(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}).subscribe()},t.prototype.sendActionToBot=function(r){return u(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return e=r.getDisplayText(),[4,this.sendMessageToBot(e)];case 1:return t.sent(),[2]}})})},t.prototype.sendMessageToBot=function(e){return u(this,void 0,void 0,function(){return a(this,function(t){return console.log("👩‍💻 "+e),this.directLine.postActivity({from:{id:this.conversationId},type:"message",text:e}).subscribe(),[2]})})},t.prototype.activityToString=function(t){var e=t.type,r=[];return t.name&&r.push({name:"name",value:t.name}),t.actorId&&r.push({name:"actorId",value:t.actorId}),t.closeUpId&&r.push({name:"closeUpId",value:t.closeUpId}),t.inventoryItemId&&r.push({name:"inventoryItemId",value:t.inventoryItemId}),t.objectId&&r.push({name:"objectId",value:t.objectId}),t.text&&r.push({name:"text",value:t.text}),t.description&&r.push({name:"description",value:t.description}),t.roomId&&r.push({name:"roomId",value:t.roomId}),t.x&&r.push({name:"x",value:t.x}),t.y&&r.push({name:"y",value:t.y}),0<r.length?e+" ("+r.map(function(t){return t.name+"="+t.value}).join(", ")+")":e},t}(),l=function(){function t(t,e){this.game=t,this.layers=e}return t.prototype.create=function(){var i=this;this.sprite=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"cursor"),this.sprite.anchor.set(.5),this.layers.cursor.add(this.sprite);this.sprite.animations.add("blink");this.sprite.animations.play("blink",6,!0),this.game.canvas.addEventListener("mousedown",function(){options.enableFullScreen&&i.game.scale.startFullScreen(!1)}),this.game.input.addMoveCallback(function(t,e,r,n){n||(i.sprite.x=i.game.input.x,i.sprite.y=i.game.input.y)},this)},t}(),p=function(){function t(t){this.game=t}return Object.defineProperty(t.prototype,"background",{get:function(){return this.backgroundGroup},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objects",{get:function(){return this.objectGroup},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actors",{get:function(){return this.actorGroup},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.textGroup},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ui",{get:function(){return this.uiGroup},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){return this.cursorGroup},enumerable:!0,configurable:!0}),t.prototype.create=function(){this.backgroundGroup=this.game.add.group(),this.objectGroup=this.game.add.group(),this.actorGroup=this.game.add.group(),this.textGroup=this.game.add.group(),this.uiGroup=this.game.add.group(),this.cursorGroup=this.game.add.group()},t}(),f=function(){function t(t,e){this.game=t,this.layers=e}return t.prototype.create=function(){this.text=this.game.add.text(400,462,"",{font:"48px Onesize",fill:"white",align:"center"}),this.text.anchor.setTo(.5),this.text.lineSpacing=-30,this.text.scale.x=.5,this.text.scale.y=.5,this.layers.ui.add(this.text)},t.prototype.setText=function(t){this.text.setText(t)},t.prototype.setVisible=function(t){this.text.visible=t},t}(),b=function(){function t(t,e){this.name=t,this.displayName=e,this.stateMap=new Map}return t.prototype.create=function(t,e,r,n,i){var o=this;this.sprite=t.add.sprite(r,n,this.name),this.sprite.anchor.set(.5),this.sprite.inputEnabled=!0,this.sprite.input.pixelPerfectClick=!0,this.sprite.input.pixelPerfectOver=!0,i.add(this.sprite),this.sprite.events.onInputOver.add(function(){return e.focusObject(o)}),this.sprite.events.onInputOut.add(function(){return e.focusObject(null)}),this.sprite.events.onInputDown.add(function(){return e.selectObject(o)})},t.prototype.setVisible=function(t){this.sprite.visible=t},t.prototype.kill=function(){this.sprite.destroy(),this.sprite=null},t}(),d=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),y=function(o,s,c,u){return new(c||(c=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(r,n)}i((u=u.apply(o,s||[])).next())})},v=function(r,n){var i,o,s,t,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,o=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(r,c)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},m=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},w=function(o){function t(t,e,r){var n=o.call(this,t,e)||this;return n.textColor=r,n}return d(t,o),t.prototype.create=function(t,e,r,n,i){o.prototype.create.call(this,t,e,r,n,i),this.game=t,this.originX=r,this.originY=n,this.facingFront=!0,this.sprite.anchor.set(.5,1),this.walkSprite=t.add.sprite(r,n,this.name+"-walk"),this.walkSprite.anchor.set(.5,1),this.walkSprite.inputEnabled=!0,this.walkSprite.input.pixelPerfectClick=!0,this.walkSprite.input.pixelPerfectOver=!0,this.walkSprite.visible=!1,this.backSprite=t.add.sprite(r,n,this.name+"-back"),this.backSprite.anchor.set(.5,1),this.backSprite.visible=!1,this.text=this.game.add.text(r,n-this.sprite.height-40,"",this.createTextStyle()),this.text.anchor.setTo(.5),this.text.lineSpacing=-30,this.text.scale.x=.5,this.text.scale.y=.5,this.talkAnimation=this.sprite.animations.add("talk"),this.walkAnimation=this.walkSprite.animations.add("walk"),this.spriteGroup=t.add.group(),this.spriteGroup.addMultiple([this.sprite,this.walkSprite,this.backSprite,this.text]),i.add(this.spriteGroup)},t.prototype.say=function(u){return y(this,void 0,void 0,function(){var e,r,n,i,o,s,c;return v(this,function(t){switch(t.label){case 0:n=u.split("\n"),t.label=1;case 1:t.trys.push([1,6,7,8]),i=m(n),o=i.next(),t.label=2;case 2:return o.done?[3,5]:(s=o.value,[4,this.sayLine(s)]);case 3:t.sent(),t.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return c=t.sent(),e={error:c},[3,8];case 7:try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}return[7];case 8:return[2]}})})},t.prototype.faceFront=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.backSprite.visible=!1,this.sprite.visible=!0,this.facingFront=!0,[2,Promise.resolve()]})})},t.prototype.faceBack=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.sprite.visible=!1,this.backSprite.visible=!0,this.facingFront=!1,[2,Promise.resolve()]})})},t.prototype.walkTo=function(u,a){return y(this,void 0,void 0,function(){var e,r,n,i,o,s,c=this;return v(this,function(t){switch(t.label){case 0:return this.facingFront?[3,2]:[4,this.faceFront()];case 1:t.sent(),t.label=2;case 2:return e=u-this.originX,r=a-this.originY,e==this.spriteGroup.x&&r==this.spriteGroup.y?[2]:(n=Math.abs((e-this.spriteGroup.x)/100*1e3),i=e<this.spriteGroup.x,o=this.walkSprite.scale.x<0,(i&&!o||!i&&o)&&(this.walkSprite.scale.x*=-1),this.walkAnimation.play(6,!0),this.sprite.visible=!1,this.walkSprite.visible=!0,s=this.game.add.tween(this.spriteGroup).to({x:e,y:r},n,Phaser.Easing.Default,!0),[4,new Promise(function(t){s.onComplete.add(function(){c.walkSprite.visible=!1,c.sprite.visible=!0,c.walkAnimation.stop(),t()})})]);case 3:return t.sent(),[2]}})})},t.prototype.kill=function(){this.walkSprite.destroy(),this.backSprite.destroy(),this.text.destroy(),this.talkAnimation.destroy(),this.walkAnimation.destroy(),o.prototype.kill.call(this)},t.prototype.sayLine=function(e){var r=this;return this.backSprite.visible||this.talkAnimation.play(6,!0),this.text.setText(e),new Promise(function(t){r.game.time.events.add(Math.max(e.length*options.textSpeed,options.minTextDuration),function(){r.text.setText(""),r.backSprite.visible||r.talkAnimation.stop(!0),t()})})},t.prototype.createTextStyle=function(){return{font:"54px Onesize",fill:this.textColor,stroke:"black",strokeThickness:12,align:"center",wordWrap:"true",wordWrapWidth:600}},t}(b),x=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},g=function(){function t(t,e,r){this.game=t,this.botClient=e,this.layers=r}return t.prototype.displaySuggestedActions=function(s,t){var e,r,c=this,u=[],n=460;try{for(var i=x(t),o=i.next();!o.done;o=i.next()){var a=o.value,h=this.game.add.text(10,n,a.value,this.createTextStyle());h.scale.x=.5,h.scale.y=.5,h.inputEnabled=!0,this.layers.ui.add(h),h.events.onInputOver.add(function(t){t.addColor("Yellow",0)},this),h.events.onInputOut.add(function(t){t.addColor("",0)},this),h.events.onInputUp.add(function(t){var e,r,n=t.text;try{for(var i=x(u),o=i.next();!o.done;o=i.next()){o.value.destroy()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}s.say(n).then(function(){return c.botClient.sendMessageToBot(n)})},this),u.push(h),n+=h.height}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.createTextStyle=function(){return{font:"36px Onesize",fill:"#ff0044"}},t}(),S=(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),O=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return S(t,o),t.prototype.create=function(t,e,r,n,i){o.prototype.create.call(this,t,e,r,n,i),this.sprite.anchor.set(0)},t.prototype.setPosition=function(t,e){this.sprite.x=t,this.sprite.y=e},t}(b),_=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},j=function(){function t(t,e,r){this.game=t,this.uiMediator=e,this.layers=r,this.items=new Map,this.visible=!0}return t.prototype.addToInventory=function(t,e){var r=new O("inventory-"+t,e);return r.create(this.game,this.uiMediator,400+42*this.items.size,476,this.layers.ui),r.setVisible(this.visible),this.items.set(r.name,r),Promise.resolve()},t.prototype.removeFromInventory=function(t){var e=this.items.get("inventory-"+t);e&&(e.kill(),this.items.delete(e.name));var r=0;return this.items.forEach(function(t,e){t.setPosition(400+42*r,476),r++}),Promise.resolve()},t.prototype.setVisible=function(t){var e,r;this.visible=t;try{for(var n=_(this.items.values()),i=n.next();!i.done;i=n.next()){i.value.setVisible(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t}(),k=function(o,s,c,u){return new(c||(c=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(r,n)}i((u=u.apply(o,s||[])).next())})},T=function(r,n){var i,o,s,t,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,o=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(r,c)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},E=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},I=function(){function t(t,e){this.game=t,this.layers=e}return t.prototype.create=function(){this.text=this.game.add.text(400,150,"",{font:"54px Onesize",fill:"#0094FF",stroke:"black",strokeThickness:12,align:"center",wordWrap:"true",wordWrapWidth:1400}),this.text.anchor.setTo(.5),this.text.lineSpacing=-30,this.text.scale.x=.5,this.text.scale.y=.5,this.layers.text.add(this.text)},t.prototype.say=function(u){return k(this,void 0,void 0,function(){var e,r,n,i,o,s,c;return T(this,function(t){switch(t.label){case 0:n=u.split("\n"),t.label=1;case 1:t.trys.push([1,6,7,8]),i=E(n),o=i.next(),t.label=2;case 2:return o.done?[3,5]:(s=o.value,[4,this.sayLine(s)]);case 3:t.sent(),t.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return c=t.sent(),e={error:c},[3,8];case 7:try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}return[7];case 8:return[2]}})})},t.prototype.sayLine=function(e){var r=this;return this.text.setText(e),new Promise(function(t){r.game.time.events.add(Math.max(e.length*options.textSpeed,options.minTextDuration),function(){r.text.setText(""),t()})})},t}(),A=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},P=function(){function t(t){this.name=t,this.roomObjects=new Array,this.actionMap=new Map}return t.prototype.create=function(t,e,r){this.game=t,this.uiMediator=e,this.layers=r;var n=this.game.add.sprite(0,0,"room-"+this.name);this.layers.background.add(n),this.narrator=new I(t,r),this.narrator.create()},t.prototype.getObject=function(t){var e,r;try{for(var n=A(this.roomObjects),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.name==t)return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},t.prototype.getActor=function(t){var e,r;try{for(var n=A(this.roomObjects),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.name=="actor-"+t)return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return null},t.prototype.addObject=function(t,e,r){t.create(this.game,this.uiMediator,e,r,this.layers.objects),this.roomObjects.push(t)},t.prototype.addActor=function(t,e,r){t.create(this.game,this.uiMediator,e,r,this.layers.actors),this.roomObjects.push(t)},t.prototype.removeObject=function(t){t.kill();var e=this.roomObjects.indexOf(t);this.roomObjects.splice(e,1)},t.prototype.kill=function(){var e,t;try{for(var r=A(this.roomObjects),n=r.next();!n.done;n=r.next()){n.value.kill()}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},t}(),C=function(){function r(t,e){this.text=t,this.subjectSeparator=e,this.subjects=new Array}return r.prototype.addSubject=function(t){var e=null!=this.subjectSeparator;if(e){if(0==this.subjects.length&&!t.name.startsWith("inventory-"))return!1;if(this.text==r.GiveVerb&&1==this.subjects.length&&!t.name.startsWith("actor-"))return!1;if(1==this.subjects.length&&this.subjects[0]==t)return!1}return this.subjects.push(t),this.subjects.length==(e?2:1)},r.prototype.getDisplayText=function(t){return 1==this.subjects.length&&this.subjects[0]==t&&(t=null),2==this.subjects.length?this.text+" "+this.subjects[0].displayName+" "+this.subjectSeparator+" "+this.subjects[1].displayName:1==this.subjects.length?null!=t?this.text+" "+this.subjects[0].displayName+" "+this.subjectSeparator+" "+t.displayName:null!=this.subjectSeparator?this.text+" "+this.subjects[0].displayName+" "+this.subjectSeparator:this.text+" "+this.subjects[0].displayName:0==this.subjects.length&&null!=t?this.text+" "+t.displayName:this.text},r.GiveVerb="Give",r.PickUpVerb="Pick up",r.UseVerb="Use",r.OpenVerb="Open",r.LookAtVerb="Look at",r.PushVerb="Push",r.CloseVerb="Close",r.TalkToVerb="Talk to",r.PullVerb="Pull",r}(),M=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},U=function(){function t(t,e,r){this.game=t,this.uiMediator=e,this.layers=r,this.verbSprites=new Array}return t.prototype.create=function(){this.addVerb("01_give",0,0,function(){return new C(C.GiveVerb,"to")}),this.addVerb("02_pickup",1,0,function(){return new C(C.PickUpVerb)}),this.addVerb("03_use",2,0,function(){return new C(C.UseVerb,"with")}),this.addVerb("04_open",0,1,function(){return new C(C.OpenVerb)}),this.addVerb("05_lookat",1,1,function(){return new C(C.LookAtVerb)}),this.addVerb("06_push",2,1,function(){return new C(C.PushVerb)}),this.addVerb("07_close",0,2,function(){return new C(C.CloseVerb)}),this.addVerb("08_talkto",1,2,function(){return new C(C.TalkToVerb)}),this.addVerb("09_pull",2,2,function(){return new C(C.PullVerb)})},t.prototype.setVisible=function(t){var e,r;try{for(var n=M(this.verbSprites),i=n.next();!i.done;i=n.next()){i.value.visible=t}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.addVerb=function(t,e,r,n){var i=this,o=4;0<e&&(o+=1==e?100:260);var s=476+40*r,c=this.game.add.sprite(o,s,"verbs");c.frameName=t+".png",c.inputEnabled=!0,c.events.onInputOver.add(function(){c.frameName=t+"_sel.png"},this),c.events.onInputOut.add(function(){c.frameName=t+".png"},this),c.events.onInputDown.add(function(){i.uiMediator.selectAction(n())},this),this.layers.ui.add(c),this.verbSprites.push(c)},t}(),N=function(o,s,c,u){return new(c||(c=Promise))(function(t,e){function r(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(r,n)}i((u=u.apply(o,s||[])).next())})},R=function(r,n){var i,o,s,t,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,o=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){c.label=e[1];break}if(6===e[0]&&c.label<s[1]){c.label=s[1],s=e;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(e);break}s[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(r,c)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},z=function(){function t(t,e,r,n){this.game=t,this.cursor=e,this.botClient=r,this.layers=n,this.actionUI=new f(t,n),this.conversationUI=new g(t,r,n),this.inventoryUI=new j(t,this,n),this.verbsUI=new U(t,this,n)}return t.prototype.create=function(){this.actionUI.create(),this.verbsUI.create(),this.setUIVisible(!1),this.connectToBot()},t.prototype.selectAction=function(t){this.selectedAction=t,this.updateText()},t.prototype.focusObject=function(t){this.focussedObject=t,this.updateText()},t.prototype.selectObject=function(t){null!=this.selectedAction&&this.selectedAction.addSubject(t)&&(this.setUIVisible(!1),this.botClient.sendActionToBot(this.selectedAction),this.selectedAction=null,this.focussedObject=null),this.updateText()},t.prototype.connectToBot=function(){var t=this;this.botClient.connect(function(r){return N(t,void 0,void 0,function(){var e;return R(this,function(t){switch(t.label){case 0:return(e=/(.*?) \> (.*)/.exec(r.text))?[4,this.room.getActor(e[1]).say(e[2])]:[3,2];case 1:t.sent(),r.suggestedActions&&this.conversationUI.displaySuggestedActions(this.room.getActor(PlayerActor),r.suggestedActions.actions),t.label=2;case 2:return[2]}})})},function(n){return N(t,void 0,void 0,function(){var e,r;return R(this,function(t){switch(t.label){case 0:switch(n.name){case"ActorMoved":return[3,1];case"ActorFacedAway":return[3,3];case"ActorFacedFront":return[3,5];case"ActorPlacedInRoom":return[3,7];case"CloseUpOpened":return[3,8];case"CloseUpClosed":return[3,9];case"Delayed":return[3,10];case"InventoryItemAdded":return[3,12];case"InventoryItemRemoved":return[3,14];case"Narrated":return[3,16];case"ObjectPlacedInRoom":return[3,18];case"ObjectRemovedFromRoom":return[3,19];case"RoomInitializationStarted":return[3,20];case"RoomInitializationCompleted":return[3,21];case"Idle":return[3,22]}return[3,23];case 1:return[4,(e=this.room.getActor(n.actorId)).walkTo(n.x,n.y)];case 2:return t.sent(),[3,23];case 3:return[4,(e=this.room.getActor(n.actorId)).faceBack()];case 4:return t.sent(),[3,23];case 5:return[4,(e=this.room.getActor(n.actorId)).faceFront()];case 6:return t.sent(),[3,23];case 7:return e=new w("actor-"+n.actorId,n.description,n.textColor),this.room.addActor(e,n.x,n.y),[3,23];case 8:return r=new b("closeup-"+n.closeUpId,""),this.room.addActor(r,400,300),[3,23];case 9:return(r=this.room.getObject("closeup-"+n.closeUpId))&&this.room.removeObject(r),[3,23];case 10:return[4,new Promise(function(t){return setTimeout(t,n.time)})];case 11:return t.sent(),[3,23];case 12:return[4,this.inventoryUI.addToInventory(n.inventoryItemId,n.description)];case 13:return t.sent(),[3,23];case 14:return[4,this.inventoryUI.removeFromInventory(n.inventoryItemId)];case 15:return t.sent(),[3,23];case 16:return[4,this.room.narrator.say(n.text)];case 17:return t.sent(),[3,23];case 18:return r=new b("object-"+n.objectId,n.description),n.foreground?this.room.addActor(r,n.x,n.y):this.room.addObject(r,n.x,n.y),[3,23];case 19:return(r=this.room.getObject("object-"+n.objectId))&&this.room.removeObject(r),[3,23];case 20:return null!=this.room&&this.room.kill(),this.game.lockRender=!0,this.room=new P(n.roomId),this.room.create(this.game,this,this.layers),[3,23];case 21:return this.game.lockRender=!1,[3,23];case 22:return this.setUIVisible(!0),[3,23];case 23:return[2]}})})})},t.prototype.setUIVisible=function(t){this.actionUI.setVisible(t),this.inventoryUI.setVisible(t),this.verbsUI.setVisible(t)},t.prototype.updateText=function(){var t="";null!=this.selectedAction?t=this.selectedAction.getDisplayText(this.focussedObject):null!=this.focussedObject&&(t=this.focussedObject.displayName),this.actionUI.setText(t)},t}(),V=r(36),L=r(37),F=r(38),G=function(){function t(){console.log("Welcome to Game-a-Tron 4000 🤖"),this.game=new Phaser.Game(800,600,Phaser.AUTO,"content",this,!1,!1),this.layers=new p(this.game),this.cursor=new l(this.game,this.layers),this.uiMediator=new z(this.game,this.cursor,new h,this.layers)}return t.prototype.preload=function(){this.game.load.spritesheet("cursor",V,58,58),this.game.load.atlas("verbs",L,null,F),o.preload(this.game)},t.prototype.create=function(){this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.stage.smoothed=!0,this.layers.create(),this.cursor.create(),this.uiMediator.create()},t}();window.onload=function(){new G}}]);